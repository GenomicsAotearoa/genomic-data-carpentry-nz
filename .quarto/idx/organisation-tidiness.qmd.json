{"title":"Organisation and tidy data","markdown":{"yaml":{"title":"","format":"html"},"headingText":"Organisation and tidy data","containsRefs":false,"markdown":"\n\n\nGood data organisation is the foundation of any research project. It not only sets you up well for an analysis, but it also makes it easier to come back to the project later and share with collaborators, including your most important collaborator - future you.\n\nOrganising a project that includes sequencing involves many components. There‚Äôs the experimental setup and conditions metadata, measurements of experimental parameters, sequencing preparation and sample information, the sequences themselves and the files and workflow of any bioinformatics analysis. So much of the information of a sequencing project is digital, and we need to keep track of our digital records in the same way we have a lab notebook and sample freezer. In this lesson, we‚Äôll go through the project organisation and documentation that will make an efficient bioinformatics workflow possible. Not only will this make you a more effective bioinformatics researcher, it also prepares your data and project for publication, as grant agencies and publishers increasingly require this information.\n\n## Metadata\n\nWhen we think about the data for a sequencing project, we often start by thinking about the sequencing data that we get back from the sequencing centre. However, equally or more important is the data you‚Äôve generated about the sequences before it ever goes to the sequencing centre. This is the data about the data, often called the metadata. Without the information about what you sequenced, the sequence data itself is useless.\n\n::: {.callout-tip appearance=\"minimal\"}\n# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (3 mins)\n\nWhat kind of data and information have you generated (or think you will generate) about your samples that can be considered metadata? How do you store this information?\n\nDiscuss with the group. When you are ready, click on 'Solutions' for a few examples of what these metadata could be. \n\n::: {.callout-note collapse=\"true\"}\n# SOLUTIONS \n - Experimental conditions describing the biological samples, such as: temperature, weight, length, treatment.\n - Laboratory/technical data, such as: protocol or kit used to extract DNA/RNA, specific processing equipment, concentrations or quality indicators (e.g., Nanodrop, Qubit, or Bioanalyzer results)  \n - Lab notebook notes about how you conducted those experiments.  \n - Spreadsheet or tabular data with the data from your experiment and whatever you were measuring for your study.\n\n:::\n\n:::\n\n\n## Structuring data in spreadsheets\n\nRegardless of the type of data you‚Äôre collecting, there are standard ways to enter that data into the spreadsheet to make it easier to analyse later. We often enter data in a way that makes it easy for us as humans to read and work with it, because we‚Äôre human! Computers need data structured in a way that they can use it. So to use this data in a computational workflow, we need to think like computers when we use spreadsheets.\n\nThe cardinal rules of using spreadsheet programs for data:\n\n- Leave the raw data raw - do not change it!  \n- Put each observation or sample in its own row.  \n- Put all your variables in columns - the thing that vary between samples, like ‚Äòstrain‚Äô or ‚ÄòDNA-concentration‚Äô.  \n- Have column names be explanatory, but without spaces. Use ‚Äò-‚Äô, ‚Äò_‚Äô or camel case instead of a space. For instance ‚Äòlibrary-prep-method‚Äô or ‚ÄòLibraryPrep‚Äôis better than ‚Äôlibrary preparation method‚Äô or ‚Äòprep‚Äô, because computers interpret spaces in particular ways.  \n- Do not combine multiple pieces of information in one cell. Sometimes it just seems like one thing, but think if that‚Äôs the only way you‚Äôll want to be able to use or sort that data. For example, instead of having a column with species and strain name (e.g. E. coli K12) you would have one column with the species name (E. coli) and another with the strain name (K12). Depending on the type of analysis you want to do, you may even separate the genus and species names into distinct columns.  \n- Export the cleaned data to a text-based format like CSV (comma-separated values) format. This ensures that anyone can use the data, and is required by most data repositories.  \n\n\n::: {.callout-tip appearance=\"minimal\"}\n# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (2 mins)\n\nBelow is some potential spreadsheet data generated about a sequencing experiment. \n\n![](figures/organisation-01.png)\n\nDiscuss some of the problems with the spreadsheet data shown above. You can look at the image, or download the file to your computer via [this link](https://datacarpentry.github.io/organization-genomics/files/Ecoli_metadata_composite_messy.xlsx) and open it in Excel.\n\nWhen you are ready, click on 'Solutions' to see a clean version of the data.\n\n::: {.callout-note collapse=\"true\" }\n# SOLUTIONS\n\nHere is a clean version of the data ([download link here](https://raw.githubusercontent.com/datacarpentry/wrangling-genomics/gh-pages/files/Ecoli_metadata_composite.tsv)). Note the following changes to make the data tidy:  \n\n- Sections reordered to be in single columns  \n- Removed formatting/colours which won't be interpreted by most computational tools     \n- Header information about the reference, facility, read length etc moved to their own columns  \n- Spaces replaced in column names with _\n- Standarised language for mutator and cit columns i.e., `\"+\"`{style=\"color:black\"} became `plus`{style=\"color:black\"}  \n- Data has also been saved as a tsv file rather than excel format.   \n\n![](figures/organisation-02.png)\n \n\n:::\n\n:::\n\n### Tidy data principles\n\nThe simplest principle of Tidy data is that we have one row in our spreadsheet for each observation or sample, and one column for every variable that we measure or report on. As simple as this sounds, it's very easily violated. Most data scientists agree that significant amounts of their time is spent tidying data for analysis. \n\nThe R package [Tidyverse](https://tidyverse.org/) was specifically developed to deal with data cleaning and manipulation for analysis. Sidenote: a Genomics Aotearoa workshop on data manipulation with tidyverse tools is in development!\n\n\n::: {.callout-tip appearance=\"minimal\"}\n# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (1 min)\n\nHave a look at these column names and the differences between the good names and names to avoid:\n\n![](figures/organisation-03.png)\n\nWhat do you notice? Jot down your thoughts before looking at the 'Solutions' below:\n\n::: {.callout-note collapse=\"true\" }\n# SOLUTIONS\n\n- Good column names avoid using spaces and any special characters beyond underscores (`_`{style=\"color:black\"}) \n- [Camel case](https://en.wikipedia.org/wiki/Camel_case) is often a good alternative naming convention   \n- Note hyphens (`-`{style=\"color:black\"}) are also avoided as they can cause headaches with R.  \n- R also does not like column names that begin with a number (e.g., `Observation_01`{style=\"color:black\"} is fine, `01_Observation`{style=\"color:black\"} is not)\n\n:::\n\n:::\n\nThere are lots of different conventions people use to represent missing values. You should especially avoid representing a missing value as a 0 (zero), as zero implies that a measurement was taken and the result was zero. \n\nThe best option is to leave missing values as blank or designate them as an NA in your spreadsheet. \n\nSee below a few common values used for indicating a missing value:\n\n![](figures/organisation-04.png)","srcMarkdownNoYaml":"\n\n# Organisation and tidy data\n\nGood data organisation is the foundation of any research project. It not only sets you up well for an analysis, but it also makes it easier to come back to the project later and share with collaborators, including your most important collaborator - future you.\n\nOrganising a project that includes sequencing involves many components. There‚Äôs the experimental setup and conditions metadata, measurements of experimental parameters, sequencing preparation and sample information, the sequences themselves and the files and workflow of any bioinformatics analysis. So much of the information of a sequencing project is digital, and we need to keep track of our digital records in the same way we have a lab notebook and sample freezer. In this lesson, we‚Äôll go through the project organisation and documentation that will make an efficient bioinformatics workflow possible. Not only will this make you a more effective bioinformatics researcher, it also prepares your data and project for publication, as grant agencies and publishers increasingly require this information.\n\n## Metadata\n\nWhen we think about the data for a sequencing project, we often start by thinking about the sequencing data that we get back from the sequencing centre. However, equally or more important is the data you‚Äôve generated about the sequences before it ever goes to the sequencing centre. This is the data about the data, often called the metadata. Without the information about what you sequenced, the sequence data itself is useless.\n\n::: {.callout-tip appearance=\"minimal\"}\n# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (3 mins)\n\nWhat kind of data and information have you generated (or think you will generate) about your samples that can be considered metadata? How do you store this information?\n\nDiscuss with the group. When you are ready, click on 'Solutions' for a few examples of what these metadata could be. \n\n::: {.callout-note collapse=\"true\"}\n# SOLUTIONS \n - Experimental conditions describing the biological samples, such as: temperature, weight, length, treatment.\n - Laboratory/technical data, such as: protocol or kit used to extract DNA/RNA, specific processing equipment, concentrations or quality indicators (e.g., Nanodrop, Qubit, or Bioanalyzer results)  \n - Lab notebook notes about how you conducted those experiments.  \n - Spreadsheet or tabular data with the data from your experiment and whatever you were measuring for your study.\n\n:::\n\n:::\n\n\n## Structuring data in spreadsheets\n\nRegardless of the type of data you‚Äôre collecting, there are standard ways to enter that data into the spreadsheet to make it easier to analyse later. We often enter data in a way that makes it easy for us as humans to read and work with it, because we‚Äôre human! Computers need data structured in a way that they can use it. So to use this data in a computational workflow, we need to think like computers when we use spreadsheets.\n\nThe cardinal rules of using spreadsheet programs for data:\n\n- Leave the raw data raw - do not change it!  \n- Put each observation or sample in its own row.  \n- Put all your variables in columns - the thing that vary between samples, like ‚Äòstrain‚Äô or ‚ÄòDNA-concentration‚Äô.  \n- Have column names be explanatory, but without spaces. Use ‚Äò-‚Äô, ‚Äò_‚Äô or camel case instead of a space. For instance ‚Äòlibrary-prep-method‚Äô or ‚ÄòLibraryPrep‚Äôis better than ‚Äôlibrary preparation method‚Äô or ‚Äòprep‚Äô, because computers interpret spaces in particular ways.  \n- Do not combine multiple pieces of information in one cell. Sometimes it just seems like one thing, but think if that‚Äôs the only way you‚Äôll want to be able to use or sort that data. For example, instead of having a column with species and strain name (e.g. E. coli K12) you would have one column with the species name (E. coli) and another with the strain name (K12). Depending on the type of analysis you want to do, you may even separate the genus and species names into distinct columns.  \n- Export the cleaned data to a text-based format like CSV (comma-separated values) format. This ensures that anyone can use the data, and is required by most data repositories.  \n\n\n::: {.callout-tip appearance=\"minimal\"}\n# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (2 mins)\n\nBelow is some potential spreadsheet data generated about a sequencing experiment. \n\n![](figures/organisation-01.png)\n\nDiscuss some of the problems with the spreadsheet data shown above. You can look at the image, or download the file to your computer via [this link](https://datacarpentry.github.io/organization-genomics/files/Ecoli_metadata_composite_messy.xlsx) and open it in Excel.\n\nWhen you are ready, click on 'Solutions' to see a clean version of the data.\n\n::: {.callout-note collapse=\"true\" }\n# SOLUTIONS\n\nHere is a clean version of the data ([download link here](https://raw.githubusercontent.com/datacarpentry/wrangling-genomics/gh-pages/files/Ecoli_metadata_composite.tsv)). Note the following changes to make the data tidy:  \n\n- Sections reordered to be in single columns  \n- Removed formatting/colours which won't be interpreted by most computational tools     \n- Header information about the reference, facility, read length etc moved to their own columns  \n- Spaces replaced in column names with _\n- Standarised language for mutator and cit columns i.e., `\"+\"`{style=\"color:black\"} became `plus`{style=\"color:black\"}  \n- Data has also been saved as a tsv file rather than excel format.   \n\n![](figures/organisation-02.png)\n \n\n:::\n\n:::\n\n### Tidy data principles\n\nThe simplest principle of Tidy data is that we have one row in our spreadsheet for each observation or sample, and one column for every variable that we measure or report on. As simple as this sounds, it's very easily violated. Most data scientists agree that significant amounts of their time is spent tidying data for analysis. \n\nThe R package [Tidyverse](https://tidyverse.org/) was specifically developed to deal with data cleaning and manipulation for analysis. Sidenote: a Genomics Aotearoa workshop on data manipulation with tidyverse tools is in development!\n\n\n::: {.callout-tip appearance=\"minimal\"}\n# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (1 min)\n\nHave a look at these column names and the differences between the good names and names to avoid:\n\n![](figures/organisation-03.png)\n\nWhat do you notice? Jot down your thoughts before looking at the 'Solutions' below:\n\n::: {.callout-note collapse=\"true\" }\n# SOLUTIONS\n\n- Good column names avoid using spaces and any special characters beyond underscores (`_`{style=\"color:black\"}) \n- [Camel case](https://en.wikipedia.org/wiki/Camel_case) is often a good alternative naming convention   \n- Note hyphens (`-`{style=\"color:black\"}) are also avoided as they can cause headaches with R.  \n- R also does not like column names that begin with a number (e.g., `Observation_01`{style=\"color:black\"} is fine, `01_Observation`{style=\"color:black\"} is not)\n\n:::\n\n:::\n\nThere are lots of different conventions people use to represent missing values. You should especially avoid representing a missing value as a 0 (zero), as zero implies that a measurement was taken and the result was zero. \n\nThe best option is to leave missing values as blank or designate them as an NA in your spreadsheet. \n\nSee below a few common values used for indicating a missing value:\n\n![](figures/organisation-04.png)"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"engine":"markdown"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","include-before-body":["banner.html"],"toc":true,"toc-depth":4,"css":["styles.css"],"output-file":"organisation-tidiness.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","appendix-view-license":"View License","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","tools-share":"Share","tools-download":"Download","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words","listing-page-filter":"Filter","draft":"Draft"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.7.31","code-block-bg":true,"code-block-title":true,"page-layout":"full","navigation":true,"page-navigation":true,"title":""},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}