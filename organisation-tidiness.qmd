---
title: ""
format: html
---

# Organisation and tidy data

Good data organisation is the foundation of any research project. It not only sets you up well for an analysis, but it also makes it easier to come back to the project later and share with collaborators, including your most important collaborator - future you.

Organising a project that includes sequencing involves many components. There‚Äôs the experimental setup and conditions metadata, measurements of experimental parameters, sequencing preparation and sample information, the sequences themselves and the files and workflow of any bioinformatics analysis. So much of the information of a sequencing project is digital, and we need to keep track of our digital records in the same way we have a lab notebook and sample freezer. In this lesson, we‚Äôll go through the project organisation and documentation that will make an efficient bioinformatics workflow possible. Not only will this make you a more effective bioinformatics researcher, it also prepares your data and project for publication, as grant agencies and publishers increasingly require this information.

## Metadata

When we think about the data for a sequencing project, we often start by thinking about the sequencing data that we get back from the sequencing centre. However, equally or more important is the data you‚Äôve generated about the sequences before it ever goes to the sequencing centre. This is the data about the data, often called the metadata. Without the information about what you sequenced, the sequence data itself is useless.

::: {.callout-tip appearance="minimal"}
# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (3 mins)

What kind of data and information have you generated (or think you will generate) about your samples that can be considered metadata? How do you store this information?

Discuss with the group. When you are ready, click on 'Solutions' for a few examples of what these metadata could be. 

::: {.callout-note collapse="true"}
# SOLUTIONS 
 - Experimental conditions describing the biological samples, such as: temperature, weight, length, treatment.
 - Laboratory/technical data, such as: protocol or kit used to extract DNA/RNA, specific processing equipment, concentrations or quality indicators (e.g., Nanodrop, Qubit, or Bioanalyzer results)  
 - Lab notebook notes about how you conducted those experiments.  
 - Spreadsheet or tabular data with the data from your experiment and whatever you were measuring for your study.

:::

:::


## Structuring data in spreadsheets

Regardless of the type of data you‚Äôre collecting, there are standard ways to enter that data into the spreadsheet to make it easier to analyse later. We often enter data in a way that makes it easy for us as humans to read and work with it, because we‚Äôre human! Computers need data structured in a way that they can use it. So to use this data in a computational workflow, we need to think like computers when we use spreadsheets.

The cardinal rules of using spreadsheet programs for data:

- Leave the raw data raw - do not change it!  
- Put each observation or sample in its own row.  
- Put all your variables in columns - the thing that vary between samples, like ‚Äòstrain‚Äô or ‚ÄòDNA-concentration‚Äô.  
- Have column names be explanatory, but without spaces. Use ‚Äò-‚Äô, ‚Äò_‚Äô or camel case instead of a space. For instance ‚Äòlibrary-prep-method‚Äô or ‚ÄòLibraryPrep‚Äôis better than ‚Äôlibrary preparation method‚Äô or ‚Äòprep‚Äô, because computers interpret spaces in particular ways.  
- Do not combine multiple pieces of information in one cell. Sometimes it just seems like one thing, but think if that‚Äôs the only way you‚Äôll want to be able to use or sort that data. For example, instead of having a column with species and strain name (e.g. E. coli K12) you would have one column with the species name (E. coli) and another with the strain name (K12). Depending on the type of analysis you want to do, you may even separate the genus and species names into distinct columns.  
- Export the cleaned data to a text-based format like CSV (comma-separated values) format. This ensures that anyone can use the data, and is required by most data repositories.  


::: {.callout-tip appearance="minimal"}
# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (2 mins)

Below is some potential spreadsheet data generated about a sequencing experiment. 

![](figures/organisation-01.png)

Discuss some of the problems with the spreadsheet data shown above. You can look at the image, or download the file to your computer via [this link](https://datacarpentry.github.io/organization-genomics/files/Ecoli_metadata_composite_messy.xlsx) and open it in Excel.

When you are ready, click on 'Solutions' to see a clean version of the data.

::: {.callout-note collapse="true" }
# SOLUTIONS

Here is a clean version of the data ([download link here](https://raw.githubusercontent.com/datacarpentry/wrangling-genomics/gh-pages/files/Ecoli_metadata_composite.tsv)). Note the following changes to make the data tidy:  

- Sections reordered to be in single columns  
- Removed formatting/colours which won't be interpreted by most computational tools     
- Header information about the reference, facility, read length etc moved to their own columns  
- Spaces replaced in column names with _
- Standarised language for mutator and cit columns i.e., `"+"`{style="color:black"} became `plus`{style="color:black"}  
- Data has also been saved as a tsv file rather than excel format.   

![](figures/organisation-02.png)
 

:::

:::

### Tidy data principles

The simplest principle of Tidy data is that we have one row in our spreadsheet for each observation or sample, and one column for every variable that we measure or report on. As simple as this sounds, it's very easily violated. Most data scientists agree that significant amounts of their time is spent tidying data for analysis. 

The R package [Tidyverse](https://tidyverse.org/) was specifically developed to deal with data cleaning and manipulation for analysis. Sidenote: a Genomics Aotearoa workshop on data manipulation with tidyverse tools is in development!


::: {.callout-tip appearance="minimal"}
# EXERCISE üß†üèãÔ∏è‚Äç‚ôÄÔ∏è (1 min)

Have a look at these column names and the differences between the good names and names to avoid:

![](figures/organisation-03.png)

What do you notice? Jot down your thoughts before looking at the 'Solutions' below:

::: {.callout-note collapse="true" }
# SOLUTIONS

- Good column names avoid using spaces and any special characters beyond underscores (`_`{style="color:black"}) 
- [Camel case](https://en.wikipedia.org/wiki/Camel_case) is often a good alternative naming convention   
- Note hyphens (`-`{style="color:black"}) are also avoided as they can cause headaches with R.  
- R also does not like column names that begin with a number (e.g., `Observation_01`{style="color:black"} is fine, `01_Observation`{style="color:black"} is not)

:::

:::

There are lots of different conventions people use to represent missing values. You should especially avoid representing a missing value as a 0 (zero), as zero implies that a measurement was taken and the result was zero. 

The best option is to leave missing values as blank or designate them as an NA in your spreadsheet. 

See below a few common values used for indicating a missing value:

![](figures/organisation-04.png)